---
import { getCollection } from "astro:content";

import OSSCard from "@/components/OSSCard.astro";
import { H1 } from "@/components/typography";
import Layout from "@/layouts/Layout.astro";
import { css, cx } from "@/styled-system/css";

export const prerender = true;
const ossProjects = await getCollection("open-source");
---

<script>
  import { animate, stagger, spring } from "motion";

  animate(
    ".card",
    {
      opacity: [0, 1],
      y: [100, 0],
    },
    {
      easing: spring(),
      delay: stagger(0.1),
    },
  );
</script>

<Layout title="Open Source">
  <H1 class={css({ pb: 8 })}>Open Source Projects</H1>
  <div
    class={css({
      display: "flex",
      flexWrap: "wrap",
      gap: { base: 4, md: 8 },
    })}
  >
    {
      ossProjects.map(({ data: { name, description, href } }, i) => (
        <OSSCard
          name={name}
          description={description}
          href={href}
          class={cx(css({ opacity: 0 }), "card")}
        />
      ))
    }
  </div>
</Layout>
