---
import { capitalCase } from 'change-case'

import Sketch from '@/components/Sketch.astro'
import SketchLayout from '@/layouts/SketchLayout.astro'

export const prerender = true

const { pathname } = Astro.url
const title = capitalCase(pathname.split('/').pop() ?? '')
---

<script>
  import { getDimensions } from '@/utils/getDimensions'
  import { sketch, drawBorder } from '@/utils/p5'
  import type { Draw } from '@/utils/p5'

  const dimensions: number[] = getDimensions('A4')
  const padding: number[] = [40]
  const res = 10
  let margin

  const draw: Draw = p5 => {
    p5.clear(0, 0, 0, 0)
    p5.noFill()
    margin = p5.width * 0.05

    drawBorder(p5, margin)

    const cx = p5.width * 0.5
    const cy = p5.height * 0.5
    const r = p5.PI

    // placeholder
    p5.circle(cx, cy, p5.width * 0.5)
  }

  sketch({
    draw,
    dimensions,
    padding,
    renderer: 'svg',
    suffix: 'radical-radials'
  })
</script>

<SketchLayout {title}>
  <Sketch />
</SketchLayout>
